---
profile::network::leaf::manage_quagga:         false

network::interfaces_hash:
  'eth0':
    'ipaddress': '172.16.0.3/21'
    'post_up': [ '/etc/network/if-up.d/z90-route-eth0', ]
    'post_down': [ '/etc/network/if-down.d/z90-route-eth0', ]

# Add default route for management VRF
profile::base::network::routes:
  'eth0':
    'ipaddress': [ '0.0.0.0', ]
    'netmask':   [ '0.0.0.0', ]
    'gateway':   [ "%{hiera('netcfg_mgmt_gateway')}", ]
    'table':     [ 'mgmt', ]

profile::base::network::cumulus_interfaces:
  'bridge.100':
    'ipv4': [ '172.18.0.3/21', ]
    'ipv6': [ 'fd00::3/64', ]
    'virtual_ip': '172.18.7.4/21 fd00::704/64'
    'virtual_mac': '00:00:5e:00:01:06'
  'peerlink.4094':
    'ipv4': [ '172.18.228.3/24', ]
    'ipv6': [ 'fd00:18:231::1/64', ]
    'clagd_enable': true
    'clagd_priority': '4096'
    'clagd_peer_ip': '172.18.228.4'
    'clagd_sys_mac': '44:38:39:ff:bb:1e'
  'swp49':
    'mtu': '9216'
  'swp50':
    'mtu': '9216'
  'swp51':
    'mtu': '9216'
  'swp52':
    'mtu': '9216'

profile::base::network::cumulus_bridges:
  'bridge':
    'ports':
      - host1
      - host2
      - host3
      - host4
      - host5
      - host6
      - host7
      - host8
      - host9
      - host10
      - host11
      - host12
      - host13
      - host14
      - host15
      - host16
      - host17
      - host44
      - host45
      - host46
      - host47
      - host48
      - peerlink
      - uplink
    'alias_name': 'Transport L2 if'
    'vlan_aware': 'true'
    'stp': 'false'
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'

profile::base::network::cumulus_bonds:
  'peerlink':
    'slaves': [ 'swp49', 'swp50', ]
    'mtu': '9216'
  'uplink':
    'slaves': [ 'swp51', 'swp52', ]
    'clag_id': '100'
    'pvid': '100'
    'mtu': '9216'
    'vids': [ '100', '110', '120', '130', ]
  'host1':
    'slaves': [ 'swp1', ]
    'clag_id': '1'
    'pvid': '100'
    'mtu': '9216'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
  'host2':
    'slaves': [ 'swp2', ]
    'clag_id': '2'
    'pvid': '100'
    'mtu': '9216'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
  'host3':
    'slaves': [ 'swp3', ]
    'clag_id': '3'
    'pvid': '100'
    'mtu': '9216'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
  'host4':
    'slaves': [ 'swp4', ]
    'clag_id': '4'
    'pvid': '100'
    'mtu': '9216'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
  'host5':
    'slaves': [ 'swp5', ]
    'clag_id': '5'
    'pvid': '100'
    'mtu': '9216'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
  'host6':
    'slaves': [ 'swp6', ]
    'clag_id': '6'
    'pvid': '100'
    'mtu': '9216'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
  'host7':
    'slaves': [ 'swp7', ]
    'clag_id': '7'
    'pvid': '100'
    'mtu': '9216'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
  'host8':
    'slaves': [ 'swp8', ]
    'clag_id': '8'
    'pvid': '100'
    'mtu': '9216'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
  'host9':
    'slaves': [ 'swp9', ]
    'clag_id': '9'
    'pvid': '100'
    'mtu': '9216'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
  'host10':
    'slaves': [ 'swp10', ]
    'clag_id': '10'
    'pvid': '100'
    'mtu': '9216'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
  'host11':
    'slaves': [ 'swp11', ]
    'clag_id': '11'
    'pvid': '100'
    'mtu': '9216'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
  'host12':
    'slaves': [ 'swp12', ]
    'clag_id': '12'
    'pvid': '100'
    'mtu': '9216'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
  'host13':
    'slaves': [ 'swp13', ]
    'clag_id': '13'
    'pvid': '100'
    'mtu': '9216'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
  'host14':
    'slaves': [ 'swp14', ]
    'clag_id': '14'
    'pvid': '100'
    'mtu': '9216'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
  'host15':
    'slaves': [ 'swp15', ]
    'clag_id': '15'
    'pvid': '100'
    'mtu': '9216'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
  'host16':
    'slaves': [ 'swp16', ]
    'clag_id': '16'
    'pvid': '100'
    'mtu': '9216'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
  'host17':
    'slaves': [ 'swp17', ]
    'clag_id': '17'
    'pvid': '100'
    'mtu': '9216'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
  'host44':
    'slaves': [ 'swp44', ]
    'clag_id': '44'
    'pvid': '100'
    'mtu': '9216'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
  'host45':
    'slaves': [ 'swp45', ]
    'clag_id': '45'
    'pvid': '100'
    'mtu': '9216'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
  'host46':
    'slaves': [ 'swp46', ]
    'clag_id': '46'
    'pvid': '100'
    'mtu': '9216'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
  'host47':
    'slaves': [ 'swp47', ]
    'clag_id': '47'
    'pvid': '100'
    'mtu': '9216'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
  'host48':
    'slaves': [ 'swp48', ]
    'clag_id': '48'
    'pvid': '100'
    'mtu': '9216'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true

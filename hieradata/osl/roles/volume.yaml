---
profile::base::common::packages:
  'nfs-utils': {}

profile::openstack::volume::type:
  rbd:
    visibility: "public"
    properties:
      - 'volume_backend_name=rbd-volumes'
  nfs:
    visibility: "private"
    properties:
      - 'volume_backend_name=atlas-storage'

profile::openstack::volume::backend::nfs:
  atlas-storage:
    nfs_servers: ["%{hiera('cinder_nfs_backend_server')}"]

cinder::backends::enabled_backends:
  - rbd-volumes
  - atlas-storage

# Use transport network for this (which has no DNS name)
#cinder_nfs_backend_server:  "osl-nfs-01:/opt/volumeshare"
cinder_nfs_backend_server:  "172.18.32.80:/opt/volumeshare"

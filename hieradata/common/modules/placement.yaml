---
# Shared config (nodes: novactrl, compute)
placement::db::database_connection: "mysql+pymysql://placement:%{hiera('placement::db::mysql::password')}@%{hiera('service__address__db_regional')}/placement"

# logging
placement::logging::log_facility: 'LOG_LOCAL0'
placement::logging::use_syslog:   true

# mysql database (node: db)
placement::db::mysql::password: "%{hiera('nova_placement_password')}"
placement::db::mysql::allowed_hosts:
  - "%{hiera('netcfg_trp_netpart')}.%"

# keystone placement auth (node: identity)
placement::keystone::auth::region:           "%{location}"
placement::keystone::auth::password:         "%{hiera('nova_placement_password')}"
placement::keystone::auth::public_url:       "%{hiera('endpoint__placement__public')}"
placement::keystone::auth::admin_url:        "%{hiera('endpoint__placement__admin')}"
placement::keystone::auth::internal_url:     "%{hiera('endpoint__placement__internal')}"

# placement auth url
placement::keyston::authtoken::auth_url:             "%{hiera('endpoint__identity__admin')}/v3"
placement::keyston::authtoken::region_name:          "%{location}"
placement::keyston::authtoken::password:             "%{hiera('nova_placement_password')}"
placement::keyston::authtoken::valid_interface:      "internal"
placement::keyston::authtoken::project_domain_name:  "%{hiera('keystone__default__domain')}"
placement::keyston::authtoken::user_domain_name:     "%{hiera('keystone__default__domain')}"
placement::keyston::authtoken::project_name:         "%{hiera('keystone__service__project')}"

# placement wsgi
placement::wsgi::apache::ssl:        false
placement::wsgi::apache::api_port:   8778
placement::wsgi::apache::bind_host:  "%{ipaddress_trp1}"
placement::wsgi::apache::threads:    1
placement::wsgi::apache::workers:    4
placement::wsgi::apache::custom_wsgi_process_options:
  maximum-requests: 1000


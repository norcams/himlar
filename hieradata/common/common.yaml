---
classes:
  - profile::base::common
classes_bootstrap:
  - profile::base::common

#
# Location metadata
#
location_description: unset
location_environment: unset
location_tag: unset

valid_location_tags:
  - bgo
  - osl
  - trd
  - vagrant
valid_location_environments:
  - prod
  - dev

#
# Default interfaces
#
mgmt_interface:      'eth0'
mgmt_address:        "%{ipaddress_eth0}"

#
# Openstack services
#
# These defaults will only work when all services are installed on the
# same box - they need to be overridden per location
#
service__address__mysql:           "%{hiera('mgmt_address')}"
service__address__rabbitmq:        "%{hiera('mgmt_address')}"
service__address__keystone:        "%{hiera('mgmt_address')}"
service__address__glance_registry: "%{hiera('mgmt_address')}"
service__address__glance_api:      "%{hiera('mgmt_address')}"
service__address__nova_api:        "%{hiera('mgmt_address')}"
service__address__neutron_server:  "%{hiera('mgmt_address')}"

#
# Network configuration data
#
networks:
  bgo:
    domain:
      mgmt: mgmt.iaas.intern
      oob: oob.iaas.intern
    subnet:
      mgmt: 172.16.32.1/21
      oob: 172.16.24.1/21
    dhcp:
      mgmt:
        ensure: absent
      oob:
        ensure: present
        interface: eth2
        start_offset: 100
        end_offset: 199
        lease: 43200
    nat:
      mgmt:
        ensure: present
      oob:
        ensure: present
  osl:
    domain:
      mgmt: iaas.uio.no
      oob: iaas.uio.no
    subnet:
      mgmt: 129.240.224.97/27
      oob: 129.240.224.65/27
    dhcp:
      mgmt:
        ensure: absent
      oob:
        ensure: absent
    nat:
      mgmt:
        ensure: absent
      oob:
        ensure: absent
  trd:
    domain:
      mgmt: mgmt.iaas.ntnu.no
      oob: oob.iaas.ntnu.no
    subnet:
      mgmt: 10.171.91.1/24
      oob: 10.171.86.1/24
    dhcp:
      mgmt:
        ensure: absent
      oob:
        ensure: present
        interface: eth2
        start_offset: 100
        end_offset: 199
        lease: 43200
    nat:
      mgmt:
        ensure: present
      oob:
        ensure: present
  vagrant:
    domain:
      mgmt: himlar.local
    subnet:
      mgmt: 10.0.3.1/24
      oob: 10.0.4.1/24
    dhcp:
      mgmt:
        ensure: absent
      oob:
        ensure: present
        interface: eth1
        start_offset: 100
        end_offset: 199
        lease: 43200
    nat:
      mgmt:
        ensure: present
      oob:
        ensure: present


---
# Use ceph cluster for instance disk
nova::compute::rbd::ephemeral_storage:            true
nova::compute::rbd::libvirt_images_rbd_pool:      'vms'
#nova::compute::rbd::libvirt_images_rbd_ceph_conf: '/etc/ceph/ceph.conf'

# Optimize cache mode for ceph
nova::compute::libvirt::libvirt_disk_cachemodes:
  - '"network=writeback"'

# set lowest common denominator for live migration compat
nova::compute::libvirt::libvirt_cpu_mode:  'custom'
nova::compute::libvirt::libvirt_cpu_model: 'Westmere'

nova::compute::vnc_enabled: true
nova::compute::vncserver_proxyclient_address: "%{ipaddress_mgmt1}"
nova::compute::vncproxy_host: "console.%{hiera('domain_public')}"
nova::compute::vncproxy_protocol: 'https'
nova::compute::libvirt::vncserver_listen: "%{ipaddress_mgmt1}"
# SPICE
# nova::compute::vnc_enabled:                       false
# nova::compute::spice::server_proxyclient_address: "%{::ipaddress_trp1}"
# nova::compute::spice::proxy_host:                 "console.%{hiera('domain_public')}"
# nova::compute::spice::proxy_protocol:             'https'
# nova::compute::spice::server_listen:              "%{::ipaddress_trp1}"

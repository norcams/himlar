---
profile::network::leaf::manage_license: true
profile::network::leaf::manage_portconfig: true

named_interfaces::config:
  mgmt:
    - eth0
  trp:
    - bridge.100

# FIXME:sensu-go
profile::monitoring::sensu::agent::enable_go_agent:     false

profile::network::leaf::switchd_conf:
  'resilient_hash_enable':
    line: 'resilient_hash_enable = TRUE'
    path: '/etc/cumulus/datapath/traffic.conf'

profile::network::leaf::acls:
  '02control_plane_custom.rules':
    iptables:
      # Allow SMB and NFS from UiB network (only BGO)
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp -s 129.177.0.0/16 --dport 139 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp -s 129.177.0.0/16 --dport 139 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp -s 129.177.0.0/16 --dport 445 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp -s 129.177.0.0/16 --dport 445 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp -s 129.177.0.0/16 --dport 2049 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp -s 129.177.0.0/16 --dport 2049 -j ACCEPT"
      # Allow DNS requests to ns2.nrec.no
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp -d 158.39.77.251 --dport 53 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp -d 158.39.77.251 --dport 53 -j ACCEPT"
      # Block specific ports from everywhere (telnet, portmapper, SMB, NFS)
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 23 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp --dport 23 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 111 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp --dport 111 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 139 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp --dport 139 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 445 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp --dport 445 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 2049 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp --dport 2049 -j DROP"
      # The following is Uninett / Sikt addresses (all Norwegian universities)
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp -s 78.91.0.0/16 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp -s 78.91.0.0/16 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp -s 84.38.14.0/24 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp -s 84.38.14.0/24 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp -s 109.105.125.0/25 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp -s 109.105.125.0/25 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp -s 128.39.0.0/16 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp -s 128.39.0.0/16 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp -s 129.177.0.0/16 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp -s 129.177.0.0/16 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp -s 129.240.0.0/16 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp -s 129.240.0.0/16 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp -s 129.241.0.0/16 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp -s 129.241.0.0/16 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp -s 129.242.0.0/16 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp -s 129.242.0.0/16 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp -s 144.164.0.0/16 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp -s 144.164.0.0/16 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp -s 151.157.0.0/16 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp -s 151.157.0.0/16 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp -s 152.94.0.0/16 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp -s 152.94.0.0/16 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp -s 157.249.0.0/16 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp -s 157.249.0.0/16 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp -s 158.36.0.0/14 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp -s 158.36.0.0/14 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp -s 161.4.0.0/16 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp -s 161.4.0.0/16 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp -s 192.111.33.0/24 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp -s 192.111.33.0/24 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp -s 192.133.32.0/24 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp -s 192.133.32.0/24 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp -s 192.146.238.0/23 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp -s 192.146.238.0/23 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp -s 193.156.0.0/15 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp -s 193.156.0.0/15 -j ACCEPT"
      # Block specific ports (except from UH networks above)
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 25 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp --dport 25 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 53 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp --dport 53 -j DROP"
      #- "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 123 -j DROP"
      #- "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp --dport 123 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 1186 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp --dport 1186 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 1433 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp --dport 1433 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 1434 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp --dport 1434 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 3128 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp --dport 3128 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 3306 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp --dport 3306 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 3389 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp --dport 3389 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 5432 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp --dport 5432 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 5900 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp --dport 5900 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 6379 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 8080 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp --dport 8080 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 8443 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp --dport 8443 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 9200 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 27017 -j DROP"
    ip6tables:
      # Allow SMB and NFS from UiB network (only BGO)
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp -s 2001:700:200::/48 --dport 139 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp -s 2001:700:200::/48 --dport 139 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp -s 2001:700:200::/48 --dport 445 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp -s 2001:700:200::/48 --dport 445 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp -s 2001:700:200::/48 --dport 2049 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp -s 2001:700:200::/48 --dport 2049 -j ACCEPT"
      # Allow DNS requests to ns2.nrec.no
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp -d 2001:700:2:83ff::251 --dport 53 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp -d 2001:700:2:83ff::251 --dport 53 -j ACCEPT"
      # Block specific ports (telnet, portmapper, SMB, NFS)
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 23 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp --dport 23 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 111 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp --dport 111 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 139 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp --dport 139 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 445 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp --dport 445 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 2049 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp --dport 2049 -j DROP"
      # The following is Uninett / Sikt addresses (all Norwegian universities)
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp -s 2001:700::/32 -j ACCEPT"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp -s 2001:700::/32 -j ACCEPT"
      # Block specific ports (except from UH networks above)
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 25 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp --dport 25 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 53 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp --dport 53 -j DROP"
      #- "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 123 -j DROP"
      #- "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp --dport 123 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 1186 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp --dport 1186 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 1433 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp --dport 1433 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 1434 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp --dport 1434 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 3128 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp --dport 3128 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 3306 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp --dport 3306 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 3389 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp --dport 3389 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 5432 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp --dport 5432 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 5900 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp --dport 5900 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 6379 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 8080 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp --dport 8080 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 8443 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p udp --dport 8443 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 9200 -j DROP"
      - "-A $FORWARD_CHAIN -i %{hiera('profile::base::network::uplink_interface')} -p tcp --dport 27017 -j DROP"

profile::monitoring::collectd::enable: true

# Dellemc S5132f needs explicit config
profile::network::leaf::cumulus_portconfigs:
  1:
    line:  "1=4x25G"
  2:
    line:  "2=4x25G"
  3:
    line:  "3=4x25G"
  4:
    line:  "4=4x25G"
  5:
    line:  "5=4x25G"
  6:
    line:  "6=4x25G"
  7:
    line:  "7=4x25G"
  8:
    line:  "8=4x25G"
  9:
    line:  "9=4x25G"
  10:
    line:  "10=4x25G"
  11:
    line:  "11=4x25G"
  12:
    line:  "12=4x25G"
  13:
    line:  "13=4x25G"
  14:
    line:  "14=4x25G"
  15:
    line:  "15=4x25G"
  16:
    line:  "16=4x25G"
  17:
    line:  "17=4x25G"
  18:
    line:  "18=4x25G"
  19:
    line:  "19=4x25G"
  20:
    line:  "20=4x25G"
  21:
    line:  "21=4x25G"
  22:
    line:  "22=4x25G"
  23:
    line:  "23=4x25G"
  24:
    line:  "24=40G" # leaf-01-02 - uinett LHC
  25:
    line:  "25=40G" # leaf-01-02 - uinett LHC
  26:
    line:  "26=40G" # leaf-03-04
  27:
    line:  "27=40G" # leaf-03-04
  28:
    line:  "28=4x10G" # new uplink uninett
  29:
    line:  "29=100G" # leaf-05-06
  30:
    line:  "30=100G" # leaf-05-06

profile::base::network::cumulus_interfaces:
  'swp24':
    'speed': '40000'
    'mtu':   '9216'
  'swp25':
    'speed': '40000'
    'mtu':   '9216'
  'swp26':
    'speed': '40000'
    'mtu':   '9216'
  'swp27':
    'speed': '40000'
    'mtu':   '9216'
#  'swp29':
#    'speed': '40000'
#    'fec':   'baser'
#    'mtu':   '9216'

profile::base::network::cumulus_bonds:
  'peerlink':
    'slaves': [ 'swp31-32', ]
    'mtu':   '9216'
#  'downlink':
#    'slaves': [ 'swp29-30', ]
#    'clag_id': '1000'
#    'pvid': '100'
#    'vids': [ '100', '110', '120', '130', ]
#    'mtu': '9216'
  'downlinkl0102':
    'slaves': [ 'swp24-25', ]
    'clag_id': '1001'
    'pvid': '100'
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'downlinkl0304':
    'slaves': [ 'swp26-27', ]
    'clag_id': '1002'
    'pvid': '100'
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'uib_dc':
    'slaves': [ 'swp28s1', ]
    'clag_id': '1003'
    'pvid': '924'
    'vids': [ '924', '927', ]
    'mstpctl_portbpdufilter': true
    'mtu': '9216'
  'downlinkl0506':
    'slaves': [ 'swp29-30', ]
    'clag_id': '1004'
    'pvid': '100'
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host1':
    'slaves': [ 'swp1s0', ]
    'clag_id': '1'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host2':
    'slaves': [ 'swp1s1', ]
    'clag_id': '2'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host3':
    'slaves': [ 'swp1s2', ]
    'clag_id': '3'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host4':
    'slaves': [ 'swp1s3', ]
    'clag_id': '4'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host5':
    'slaves': [ 'swp2s0', ]
    'clag_id': '5'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host6':
    'slaves': [ 'swp2s1', ]
    'clag_id': '6'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host7':
    'slaves': [ 'swp2s2', ]
    'clag_id': '7'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host8':
    'slaves': [ 'swp2s3', ]
    'clag_id': '8'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host9':
    'slaves': [ 'swp3s0', ]
    'clag_id': '9'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host10':
    'slaves': [ 'swp3s1', ]
    'clag_id': '10'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host11':
    'slaves': [ 'swp3s2', ]
    'clag_id': '11'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host12':
    'slaves': [ 'swp3s3', ]
    'clag_id': '12'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host13':
    'slaves': [ 'swp4s0', ]
    'clag_id': '13'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host14':
    'slaves': [ 'swp4s1', ]
    'clag_id': '14'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host15':
    'slaves': [ 'swp4s2', ]
    'clag_id': '15'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host16':
    'slaves': [ 'swp4s3', ]
    'clag_id': '16'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host17':
    'slaves': [ 'swp5s0', ]
    'clag_id': '17'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host18':
    'slaves': [ 'swp5s1', ]
    'clag_id': '18'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host19':
    'slaves': [ 'swp5s2', ]
    'clag_id': '19'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host20':
    'slaves': [ 'swp5s3', ]
    'clag_id': '20'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host21':
    'slaves': [ 'swp6s0', ]
    'clag_id': '21'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host22':
    'slaves': [ 'swp6s1', ]
    'clag_id': '22'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host23':
    'slaves': [ 'swp6s2', ]
    'clag_id': '23'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host25':
    'slaves': [ 'swp7s0', ]
    'clag_id': '25'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host26':
    'slaves': [ 'swp7s1', ]
    'clag_id': '26'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host27':
    'slaves': [ 'swp7s2', ]
    'clag_id': '27'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host28':
    'slaves': [ 'swp7s3', ]
    'clag_id': '28'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host29':
    'slaves': [ 'swp8s0', ]
    'clag_id': '29'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host30':
    'slaves': [ 'swp8s1', ]
    'clag_id': '30'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host31':
    'slaves': [ 'swp8s2', ]
    'clag_id': '31'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host32':
    'slaves': [ 'swp8s3', ]
    'clag_id': '32'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host33':
    'slaves': [ 'swp9s0', ]
    'clag_id': '33'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host34':
    'slaves': [ 'swp9s1', ]
    'clag_id': '34'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host35':
    'slaves': [ 'swp9s2', ]
    'clag_id': '35'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host36':
    'slaves': [ 'swp9s3', ]
    'clag_id': '36'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host37':
    'slaves': [ 'swp10s0', ]
    'clag_id': '37'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host38':
    'slaves': [ 'swp10s1', ]
    'clag_id': '38'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host39':
    'slaves': [ 'swp10s2', ]
    'clag_id': '39'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host40':
    'slaves': [ 'swp10s3', ]
    'clag_id': '40'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host41':
    'slaves': [ 'swp11s0', ]
    'clag_id': '41'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host42':
    'slaves': [ 'swp11s1', ]
    'clag_id': '42'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host43':
    'slaves': [ 'swp11s2', ]
    'clag_id': '43'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host44':
    'slaves': [ 'swp11s3', ]
    'clag_id': '44'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host45':
    'slaves': [ 'swp12s0', ]
    'clag_id': '45'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host46':
    'slaves': [ 'swp12s1', ]
    'clag_id': '46'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host49':
    'slaves': [ 'swp13s0', ]
    'clag_id': '49'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host50':
    'slaves': [ 'swp13s1', ]
    'clag_id': '50'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host51':
    'slaves': [ 'swp13s2', ]
    'clag_id': '51'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host52':
    'slaves': [ 'swp13s3', ]
    'clag_id': '52'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host53':
    'slaves': [ 'swp14s0', ]
    'clag_id': '53'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host54':
    'slaves': [ 'swp14s1', ]
    'clag_id': '54'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host55':
    'slaves': [ 'swp14s2', ]
    'clag_id': '55'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host56':
    'slaves': [ 'swp14s3', ]
    'clag_id': '56'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host57':
    'slaves': [ 'swp15s0', ]
    'clag_id': '57'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host58':
    'slaves': [ 'swp15s1', ]
    'clag_id': '58'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host59':
    'slaves': [ 'swp15s2', ]
    'clag_id': '59'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host60':
    'slaves': [ 'swp15s3', ]
    'clag_id': '60'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host61':
    'slaves': [ 'swp16s0', ]
    'clag_id': '61'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host62':
    'slaves': [ 'swp16s1', ]
    'clag_id': '62'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host63':
    'slaves': [ 'swp16s2', ]
    'clag_id': '63'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host64':
    'slaves': [ 'swp16s3', ]
    'clag_id': '64'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host65':
    'slaves': [ 'swp17s0', ]
    'clag_id': '65'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host66':
    'slaves': [ 'swp17s1', ]
    'clag_id': '66'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host67':
    'slaves': [ 'swp17s2', ]
    'clag_id': '67'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host68':
    'slaves': [ 'swp17s3', ]
    'clag_id': '68'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host69':
    'slaves': [ 'swp18s0', ]
    'clag_id': '69'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host70':
    'slaves': [ 'swp18s1', ]
    'clag_id': '70'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host71':
    'slaves': [ 'swp18s2', ]
    'clag_id': '71'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host72':
    'slaves': [ 'swp18s3', ]
    'clag_id': '72'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host73':
    'slaves': [ 'swp19s0', ]
    'clag_id': '73'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host74':
    'slaves': [ 'swp19s1', ]
    'clag_id': '74'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host75':
    'slaves': [ 'swp19s2', ]
    'clag_id': '75'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host76':
    'slaves': [ 'swp19s3', ]
    'clag_id': '76'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host77':
    'slaves': [ 'swp20s0', ]
    'clag_id': '77'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host78':
    'slaves': [ 'swp20s1', ]
    'clag_id': '78'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host79':
    'slaves': [ 'swp20s2', ]
    'clag_id': '79'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host80':
    'slaves': [ 'swp20s3', ]
    'clag_id': '80'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host81':
    'slaves': [ 'swp21s0', ]
    'clag_id': '81'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host82':
    'slaves': [ 'swp21s1', ]
    'clag_id': '82'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host83':
    'slaves': [ 'swp21s2', ]
    'clag_id': '83'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host84':
    'slaves': [ 'swp21s3', ]
    'clag_id': '84'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host85':
    'slaves': [ 'swp22s0', ]
    'clag_id': '85'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host86':
    'slaves': [ 'swp22s1', ]
    'clag_id': '86'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host87':
    'slaves': [ 'swp22s2', ]
    'clag_id': '87'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host88':
    'slaves': [ 'swp22s3', ]
    'clag_id': '88'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host89':
    'slaves': [ 'swp23s0', ]
    'clag_id': '89'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'
  'host90':
    'slaves': [ 'swp23s1', ]
    'clag_id': '90'
    'pvid': '100'
    'mstpctl_portadminedge': true
    'mstpctl_bpduguard': true
    'vids': [ '100', '110', '120', '130', ]
    'mtu': '9216'

profile::base::network::cumulus_bridges:
  'bridge':
    'ports':
      - host1
      - host2
      - host3
      - host4
      - host5
      - host6
      - host7
      - host8
      - host9
      - host10
      - host11
      - host12
      - host13
      - host14
      - host15
      - host16
      - host17
      - host18
      - host19
      - host20
      - host21
      - host22
      - host23
      - host25
      - host26
      - host27
      - host28
      - host29
      - host30
      - host31
      - host32
      - host33
      - host34
      - host35
      - host36
      - host37
      - host38
      - host39
      - host40
      - host41
      - host42
      - host43
      - host44
      - host45
      - host46
      - host49
      - host50
      - host51
      - host52
      - host53
      - host54
      - host55
      - host56
      - host57
      - host58
      - host59
      - host60
      - host61
      - host62
      - host63
      - host64
      - host65
      - host66
      - host67
      - host68
      - host69
      - host70
      - host71
      - host72
      - host73
      - host74
      - host75
      - host76
      - host77
      - host78
      - host79
      - host80
      - host81
      - host82
      - host83
      - host84
      - host85
      - host86
      - host87
      - host88
      - host89
      - host90
      - peerlink
      - downlinkl0102
      - downlinkl0304
      - downlinkl0506
      - uib_dc
    'alias_name': 'Transport L2 if'
    'vlan_aware': 'true'
    'stp': 'true'
    'vids': [ '100', '109', '110', '120', '924', '927', ]
    'mtu': '9216'

frrouting::frrouting::zebra_interfaces:
  'bridge':
    - 'description linux-bridge'
  'bridge.100':
    - 'description linux-bridge-100'
  'bridge.109':
    - 'description linux-bridge-109'
  'bridge.927':
    - 'description linux-bridge-927'

frrouting::frrouting::zebra_generic_options:
  'ip':
    'forwarding'
  'ipv6':
    'forwarding'

frrouting::frrouting::bgp_as: "%{hiera('bgp_as')}"

frrouting::frrouting::bgp_options:
  - "bgp router-id %{ipaddress_trp1}"
  - 'bgp log-neighbor-changes'
  - 'bgp default local-preference 200'
  - 'maximum-paths ibgp 5'
  - 'bgp bestpath as-path multipath-relax'

frrouting::frrouting::bgp_neighbor_groups:
  'rr-clients':
    'options':
      - 'peer-group'
      - "remote-as %{hiera('bgp_as')}"
      - 'addpath-tx-all-paths'
      - 'route-reflector-client'
      - 'soft-reconfiguration inbound'
      - 'route-map rr-client-allow in'
      - 'route-map rr-client-allow out'
      - 'bfd'
    'members':
      - '172.18.0.26'
      - '172.18.0.27'
      - '172.18.0.28'
      - '172.18.0.44'
      - '172.18.0.45'
      - '172.18.0.103'
      - '172.18.0.104'
      - '172.18.0.105'
      - '172.18.0.111'
      - '172.18.0.112'
      - '172.18.0.113'
      - '172.18.0.115'
      - '172.18.0.116'
      - '172.18.0.117'
      - '172.18.0.118'
      - '172.18.1.11'
      - '172.18.1.12'
      - '172.18.1.13'
      - '172.18.1.14'
      - '172.18.1.15'
      - '172.18.1.16'
      - '172.18.1.17'
      - '172.18.1.18'
      - '172.18.1.19'
      - '172.18.1.20'
      - '172.18.1.21'
      - '172.18.1.22'
      - '172.18.1.23'
      - '172.18.1.24'
      - '172.18.1.25'
      - '172.18.1.26'
      - '172.18.1.27'
      - '172.18.1.28'
      - '172.18.1.29'
      - '172.18.1.30'
      - '172.18.1.31'
      - '172.18.1.32'
      - '172.18.1.33'
      - '172.18.1.34'
      - '172.18.1.35'
      - '172.18.1.36'
      - '172.18.1.37'
      - '172.18.1.38'
      - '172.18.1.39'
      - '172.18.1.40'
      - '172.18.1.41'
      - '172.18.1.42'
      - '172.18.1.43'
      - '172.18.1.44'
      - '172.18.1.45'
      - '172.18.1.46'
      - '172.18.1.47'
      - '172.18.1.48'
      - '172.18.1.49'
      - '172.18.1.82'
      - '172.18.1.83'
      - '172.18.1.84'
      - '172.18.1.85'
      - '172.18.1.86'
      - '172.18.1.87'
      - '172.18.1.88'
      - '172.18.1.89'
      - '172.18.1.90'
      - '172.18.1.91'
      - '172.18.1.92'
      - '172.18.1.122'
      - '172.18.1.123'
      - '172.18.1.124'
      - '172.18.1.125'
      - '172.18.1.126'
      - '172.18.1.127'
      - '172.18.1.128'
      - '172.18.1.129'
      - '172.18.1.130'
      - '172.18.1.131'
      - '172.18.1.132'
      - '172.18.1.133'
      - '172.18.1.134'
      - '172.18.1.135'
      - '172.18.1.136'
      - '172.18.1.137'
      - '172.18.1.138'
      - '172.18.1.139'
      - '172.18.1.140'
      - '172.18.1.141'
      - '172.18.1.142'
      - '172.18.1.143'
      - '172.18.1.144'
      - '172.18.1.145'
    'options6':
      - 'neighbor rr-clients route-reflector-client'
      - 'neighbor rr-clients soft-reconfiguration inbound'
      - 'neighbor rr-clients addpath-tx-all-paths'
      - 'neighbor rr-clients route-map rr-client-allow6 in'
      - 'neighbor rr-clients route-map rr-client-allow6 out'
      - 'maximum-paths ibgp 5'
    'members6':
      - 'fd00::44'
      - 'fd00::45'
      - 'fd00::103'
      - 'fd00::104'
      - 'fd00::105'
      - 'fd00::111'
      - 'fd00::112'
      - 'fd00::113'
      - 'fd00::115'
      - 'fd00::116'
      - 'fd00::117'
      - 'fd00::118'
      - 'fd00::1:11'
      - 'fd00::1:12'
      - 'fd00::1:13'
      - 'fd00::1:14'
      - 'fd00::1:15'
      - 'fd00::1:16'
      - 'fd00::1:17'
      - 'fd00::1:18'
      - 'fd00::1:19'
      - 'fd00::1:20'
      - 'fd00::1:21'
      - 'fd00::1:22'
      - 'fd00::1:23'
      - 'fd00::1:24'
      - 'fd00::1:25'
      - 'fd00::1:26'
      - 'fd00::1:27'
      - 'fd00::1:28'
      - 'fd00::1:29'
      - 'fd00::1:30'
      - 'fd00::1:31'
      - 'fd00::1:32'
      - 'fd00::1:33'
      - 'fd00::1:34'
      - 'fd00::1:35'
      - 'fd00::1:36'
      - 'fd00::1:37'
      - 'fd00::1:38'
      - 'fd00::1:39'
      - 'fd00::1:40'
      - 'fd00::1:41'
      - 'fd00::1:42'
      - 'fd00::1:43'
      - 'fd00::1:44'
      - 'fd00::1:45'
      - 'fd00::1:46'
      - 'fd00::1:47'
      - 'fd00::1:48'
      - 'fd00::1:49'
      - 'fd00::1:82'
      - 'fd00::1:83'
      - 'fd00::1:84'
      - 'fd00::1:85'
      - 'fd00::1:86'
      - 'fd00::1:87'
      - 'fd00::1:88'
      - 'fd00::1:89'
      - 'fd00::1:90'
      - 'fd00::1:91'
      - 'fd00::1:92'
      - 'fd00::1:122'
      - 'fd00::1:123'
      - 'fd00::1:124'
      - 'fd00::1:125'
      - 'fd00::1:126'
      - 'fd00::1:127'
      - 'fd00::1:128'
      - 'fd00::1:129'
      - 'fd00::1:130'
      - 'fd00::1:131'
      - 'fd00::1:132'
      - 'fd00::1:133'
      - 'fd00::1:134'
      - 'fd00::1:135'
      - 'fd00::1:136'
      - 'fd00::1:137'
      - 'fd00::1:138'
      - 'fd00::1:139'
      - 'fd00::1:140'
      - 'fd00::1:141'
      - 'fd00::1:142'
      - 'fd00::1:143'
      - 'fd00::1:144'
      - 'fd00::1:145'
  'elastic_rail_b1p':
    'options':
      - 'peer-group'
      - "remote-as %{hiera('elasticip_rail_b1p_asn')}"
      - "password %{hiera('elasticip_rail_b1p_md5')}"
      - 'soft-reconfiguration inbound'
      - 'ebgp-multihop'
      - 'bfd'
    'options6':
      - 'neighbor elastic_rail_b1p activate'
      - 'neighbor elastic_rail_b1p soft-reconfiguration inbound'
    'bgp_listen_range':
      - "%{hiera('netcfg_elastic_cidr')}"
    'ip_access_list':
      - "158.39.74.253/32"
    'ip_access_list6':
      - "2001:700:2:83f0::1344/128"

frrouting::frrouting::bgp_accesslist:
  '10':
    - 'seq 5 permit 158.37.64.0 0.0.1.255'
    - 'seq 10 permit 158.39.74.0 0.0.0.255'
    - 'seq 15 permit 158.39.77.0 0.0.0.255'
    - 'seq 20 permit 158.39.201.0 0.0.0.255'
    - 'seq 25 permit 109.105.125.0 0.0.0.63'
    - 'seq 30 permit 10.1.0.0 0.0.15.255'
    - 'seq 35 permit 10.3.0.0 0.0.15.255'
    - 'seq 40 permit 10.5.0.0/20'
    - "seq 41 permit %{hiera('bgp_loopback_addr')}/32"
    - 'seq 45 permit 10.109.0.0 0.0.15.255'
    - 'seq 50 permit 109.105.127.128 0.0.0.63'
    - 'seq 55 permit 172.18.0.0 0.0.7.255'
    - 'seq 250 deny 0.0.0.0/0'
  '20':
    - 'seq 5 deny 158.37.64.0 0.0.1.255'
    - 'seq 10 deny 158.39.74.0 0.0.0.255'
    - 'seq 15 deny 158.39.77.0 0.0.0.255'
    - 'seq 20 deny 158.39.201.0 0.0.0.255'
    - 'seq 25 deny 109.105.125.0 0.0.0.63'
    - 'seq 30 deny 10.1.0.0 0.0.15.255'
    - 'seq 35 deny 10.3.0.0 0.0.15.255'
    - 'seq 40 deny 10.5.0.0/20'
    - 'seq 45 deny 10.109.0.0 0.0.15.255'
    - 'seq 50 deny 109.105.127.128 0.0.0.63'
    - 'seq 55 deny 172.18.0.0 0.0.7.255'
    - 'seq 250 permit 0.0.0.0/0'

frrouting::frrouting::bgp_accesslist6:
  '10':
    - 'permit fd00:192:168:243::/64'
    - 'permit 2001:700:2:8300::/56'
    - 'permit 2001:948:62:3::/64'
    - 'permit 2001:948:62:4::/64'
  '20':
    - 'deny any'

frrouting::frrouting::bgp_ip_prefix_list:
  - 'routes-from-leaf1 seq 5 deny any'
  - 'routes-to-leaf1 seq 5 permit 0.0.0.0/0'
  - 'uninett-routes-in seq 5 permit any'
  - 'uninett-routes-in seq 10 deny any'
  - 'uninett-routes-out seq 4 permit 158.37.64.0/23'
  - 'uninett-routes-out seq 5 permit 158.39.74.0/24'
  - 'uninett-routes-out seq 6 permit 158.39.77.0/24'
  - 'uninett-routes-out seq 7 permit 158.39.201.0/24'
  - 'uninett-routes-out seq 10 deny any'
  - 'uib-routes-in seq 10 deny any'
  - 'uib-routes-out seq 5 permit 158.37.64.0/23'
  - 'uib-routes-out seq 10 deny any'
  - 'default-route seq 5 permit 0.0.0.0/0'
frrouting::frrouting::bgp_ipv6_prefix_list:
  - 'routes-from-leaf1 seq 5 deny any'
  - 'uninett-routes6-in seq 5 permit any'
  - 'uninett-routes6-in seq 10 deny any'
  - 'uninett-routes6-out seq 5 permit 2001:700:2:8300::/56'
  - 'uninett-routes6-out seq 10 deny any'
  - 'uib-routes-in6 seq 10 deny any'
  - 'uib-routes-out6 seq 5 permit 2001:700:2:8300::/56'
  - 'uib-routes-out6 seq 10 deny any'
  - 'default-route6 seq 5 permit ::/0'

frrouting::frrouting::bgp_route_maps:
  'rr-client-allow permit 10':
    - 'match ip address 10'
  'peer-deny deny 10':
    - 'match ip address 10'
  'rr-client-allow6 permit 10':
    - 'match ipv6 address 10'
  'rr-client-allow6 deny 20':
    - 'match ipv6 address 20'
  'failover-default-route permit 10':
    - 'description default route from spine neighbor is last resort'
    - 'match ip address prefix-list default-route'
    - 'set local-preference 0'
    - 'set weight 0'
  'failover-default-route permit 15':
    - 'description apply defaults for any other route'
  'failover-default-route6 permit 10':
    - 'description default route from spine neighbor is last resort'
    - 'match ipv6 address prefix-list default-route6'
    - 'set local-preference 0'
    - 'set weight 0'
  'failover-default-route6 permit 15':
    - 'description apply defaults for any other route'
